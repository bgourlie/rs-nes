<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PPU Cycle Legend</title>
</head>
<body>

<canvas id="screen" width="1023" height="786">
</canvas>

{% for cycle_id, code in cycle_code_map %}
<div>
    <h4>Cycle {{cycle_id}}</h4>
    <pre>{{code}}</pre>
</div>
{% endfor %}

<script>
    const SCANLINES = 262;
    const CYCLES_PER_SCANLINE = 341;
    const PIXELS_PER_CYCLE = 2;
    const MARGIN_WIDTH = 1;
    const PIXEL_STRIDE = PIXELS_PER_CYCLE + MARGIN_WIDTH;
    const SCREEN_HEIGHT = SCANLINES * PIXEL_STRIDE;
    const SCREEN_WIDTH = CYCLES_PER_SCANLINE * PIXEL_STRIDE;
    console.log(`${SCREEN_WIDTH},${SCREEN_HEIGHT}`);
    const canvas = document.getElementById("screen");
    const ctx = canvas.getContext("2d");
    ctx.fillRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);

    ctx.fillStyle = "gray";
    for(let y = 0; y < SCANLINES; y += 1) {
        for(let x = 0; x < CYCLES_PER_SCANLINE; x += 1) {
            ctx.fillRect(x * PIXEL_STRIDE, y * PIXEL_STRIDE, PIXELS_PER_CYCLE, PIXELS_PER_CYCLE);
        }
    }

</script>
</body>
</html>